<!DOCTYPE html>
<html lang="en_US">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Begin Jekyll SEO tag v2.2.3 -->
<title>Introduction to Logstash | PCU</title>
<meta property="og:title" content="Introduction to Logstash">
<meta name="author" content="Thomas Estrabaud">
<meta property="og:locale" content="fr_FR">
<meta name="description" content="Introduction to Logstash on how to get and send data">
<meta property="og:description" content="Introduction to Logstash on how to get and send data">
<link rel="canonical" href="http://pcu-consortium.github.io/news/2017/Introduction-to-Logstash/">
<meta property="og:url" content="http://pcu-consortium.github.io/news/2017/Introduction-to-Logstash/">
<meta property="og:site_name" content="PCU">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-07-25T15:00:00+02:00">
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Introduction to Logstash","author":{"@type":"Person","name":"Thomas Estrabaud"},"datePublished":"2017-07-25T15:00:00+02:00","dateModified":"2017-07-25T15:00:00+02:00","description":"Introduction to Logstash on how to get and send data","mainEntityOfPage":{"@type":"WebPage","@id":"http://pcu-consortium.github.io/news/2017/Introduction-to-Logstash/"},"url":"http://pcu-consortium.github.io/news/2017/Introduction-to-Logstash/"}</script>
<!-- End Jekyll SEO tag -->

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <!--link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png" /-->

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="PCU">
  <!--link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png" /-->

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <!--meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png" /-->
  <meta name="msapplication-TileColor" content="#3372DF">

  <link rel="author" href="/humans.txt">

  <!-- self hosted CSS frameworks -->
  <link rel="stylesheet" href="/assets/stylesheets/main.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">

  <link rel="canonical" href="http://pcu-consortium.github.io/news/2017/Introduction-to-Logstash/">
  <link rel="alternate" type="application/rss+xml" title="PCU" href="http://pcu-consortium.github.io/feed.xml">
</head>

  <body id="">
    <div class="">
      <header>
  <!-- Navigation -->
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a href="/">
              <img alt="PCU logo" src="/assets/images/logo-no-bg.png" height="50">
              <span class="navbar-brand">PCU</span>
            </a>
          </div>
          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="main-navbar">
              <ul class="nav navbar-nav navbar-right">
                
                  <li>
                      <a href="/overview">Overview</a>
                  </li>
                
                  <li>
                      <a href="/use-cases">Use Cases</a>
                  </li>
                
                  <li>
                      <a href="/resources">Resources</a>
                  </li>
                
                  <li>
                      <a href="/news">News</a>
                  </li>
                
                  <li>
                      <a href="/community">Community</a>
                  </li>
                
              </ul>
          </div>
      </div>
  </nav>
</header>


      <main id="main-content">
        <section id="post">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2">
        <article id="post-introduction-to-logstash">
          <header>
            <h1 itemprop="name headline">Introduction to Logstash</h1>
            
            <a href="/tag/Filebeat/"><span class="label label-primary">Filebeat</span></a>
            
            <a href="/tag/Logstash/"><span class="label label-primary">Logstash</span></a>
            
            <a href="/tag/ElasticSearch/"><span class="label label-primary">ElasticSearch</span></a>
            
            <a href="/tag/ELK/"><span class="label label-primary">ELK</span></a>
            
            <a href="/tag/data/"><span class="label label-primary">data</span></a>
            
            <a href="/tag/pipeline/"><span class="label label-primary">pipeline</span></a>
            
            <span class="date">25/07/2017</span> by <span class="author">Thomas Estrabaud</span>
            <div class="share-panel">
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="PCUConsortium" data-size="small">Tweet</a>
  <div class="fb-share-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button" data-mobile-iframe="true"></div>
  <script type="IN/Share"></script>
  <div class="g-plus" data-action="share" data-annotation="none"></div>
</div>

          </header>
          <main class="text-justify" itemprop="articleBody">
            <div class="excerpt">
              <p>Introduction to Logstash on how to get and send data</p>
            </div>
            <div class="section">
              <div class="sect1">
<h2 id="logstash-presentation">Logstash presentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.google.fr/search?client=ubuntu&amp;channel=fs&amp;q=doc+logstash&amp;ie=utf-8&amp;oe=utf-8&amp;gfe_rd=cr&amp;ei=2vt2WfCnOujUXq75raAP">(Link to the official documentation)</a></p>
</div>
<div class="paragraph">
<p>Logstash is a tool to fetch data from a source and send it to a destination while doing some transformation on it on the fly. It has been specially designed and used to send data to ElasticSearch.</p>
</div>
<div class="paragraph">
<p>It is able to take multiple entries and output at a time and can make use of conditionals to treat data differently based on criteria and conditionals.</p>
</div>
<div class="paragraph">
<p>It uses a configuration file in a slighty modified JSON (described below).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logstash-configuration">Logstash configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Logstash configuration is separated in 3 parts :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Input</p>
</li>
<li>
<p>Filter</p>
</li>
<li>
<p>Output</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each part can be in a different file (in the same folder) and we only need to give the folder to Logstash (it will concatenate the different files).
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="input">Input</h3>
<div class="paragraph">
<p>The different inputs are in the field <code><code>input</code></code> and you can put more than one in it.</p>
</div>
<div class="paragraph">
<p>There is a list of different <a href="https://www.elastic.co/guide/en/logstash/current/input-plugins.html">input plugins</a> and we will see a few of them here.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A lot of fields are set by default and are fine like that for a simple utilisation. For more parameters do check the link above.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="read-a-file-on-a-local-file-system">Read a file on a local file system</h4>
<div class="listingblock">
<div class="content">
<pre>input {
  file {
    start_position =&gt; "beginning"
    sincedb_path =&gt; "/pathToSincedb/sincedb"
    path =&gt; "/pathToYourData/*"
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p><span class="underline">What does it do ?</span></p>
</div>
<div class="paragraph">
<p>This will read all the files that are in the folder <code><code>pathToYourData</code></code> since the beginning of the file line by line.</p>
</div>
<div class="paragraph">
<p>The <code><code>sincedb_path ⇒ "/pathToSincedb/sincedb"</code></code> let you set the path of the sincedb file that save which file you have already read and to where. So if your file has been updated the modification are taken  into account by Logstash.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Logstash will ignore files that haven’t been modified for more than 24 hours. A little <code><code>touch myFile</code></code> will resolve this problem
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="read-data-from-kafka">Read data from Kafka</h4>
<div class="listingblock">
<div class="content">
<pre>input {
  kafka{
    topic =&gt; ["myTopic1", "myTopic2"]
    auto_offset_reset =&gt; "earliest"
    bootstrap_servers =&gt; ["localhost:9092", "localhost:9093"]
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p><span class="underline">What does it do ?</span></p>
</div>
<div class="paragraph">
<p>This configuration will make Logstash consume on the topics <code><code>myTopic1</code></code> and <code><code>myTopic2</code></code> from the last offset commited or the earliest message if there is no offest (with the field <code><code>auto_offset_reset</code></code>) on the IPs <code><code>localhost:9092</code></code> and <code><code>localhost:9093</code></code></p>
</div>
</div>
<div class="sect3">
<h4 id="read-data-from-elasticsearch">Read data from ElasticSearch</h4>
<div class="paragraph">
<p>It is particulary imporant to be able to read from ElasticSearch for reindexing or simply get the data to put it elsewhere.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>input {
  elasticsearch {
    hosts =&gt; ["localhost"]
    index =&gt; "myIndex"
    query =&gt; "*"
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p><span class="underline">What does it do ?</span></p>
</div>
<div class="paragraph">
<p>This is one of the simplest configuration that will take all the data from the <code><code>myIndex</code></code> mapping.</p>
</div>
</div>
<div class="sect3">
<h4 id="read-data-from-filebeat">Read data from Filebeat</h4>
<div class="listingblock">
<div class="content">
<pre>input {
  beats {
    port =&gt; "5044"
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p><span class="underline">What does it do ?</span></p>
</div>
<div class="paragraph">
<p>With this configuration, Logstash will listen to the port 5044 where Filebeat is supposed to send data.</p>
</div>
</div>
<div class="sect3">
<h4 id="read-data-from-multiple-input">Read data from multiple input</h4>
<div class="paragraph">
<p>If we want to have multiple output we only have to put them in the input field one after another.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>input {
  file {
    start_position =&gt; "beginning"
    sincedb_path =&gt; "/pathToSincedb/sincedb"
    path =&gt; "/pathToYourData/*"
  }
  kafka {
    topic =&gt; ["myTopic1", "myTopic2"]
    auto_offset_reset =&gt; "earliest"
    bootstrap_servers =&gt; ["localhost:9092", "localhost:9093"]
  }
  elasticsearch {
    hosts =&gt; ["localhost"]
    index =&gt; "myIndex"
    query =&gt; "*"
  }
  beats {
    port =&gt; "5044"
  }
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="determine-the-origin-of-data">Determine the origin of data</h4>
<div class="paragraph">
<p>If you have multiple output you won’t know in the filter and output where you data come from as you don’t have a notion of pipeline in logstash. To keep this information you have to put a tag in the <code><code>input</code></code> like below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>input {
  file {
    tags =&gt; "FILE"
    start_position =&gt; "beginning"
    sincedb_path =&gt; "/pathToSincedb/sincedb"
    path =&gt; "/pathToYourData/*"
  }
  kafka {
    tags =&gt; "KAFKA"
    topic =&gt; ["myTopic1", "myTopic2"]
    auto_offset_reset =&gt; "earliest"
    bootstrap_servers =&gt; ["localhost:9092", "localhost:9093"]
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>With that, in the <code><code>filter</code></code> and <code><code>output</code></code> we will only have to test the tag and know where our data come from.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filter">Filter</h3>
<div class="paragraph">
<p>WORK IN PROGRESS - COME BACK LATER FOR SOME MORE AMAZING CONTENT !</p>
</div>
</div>
</div>
</div>
            </div>
          </main>
        </article>
      </div>
    </div>
  </div>
</section>

      </main>
      <footer>
    <div class="container-fluid">
        <div class="row">
          	<div class="hidden-xs hidden-sm col-md-3 col-lg-3">
        			<nav>
        			  <a href="/" title="homepage" class="logo-container">
                  <span class="footer-logo-circle">
                      <img alt="PCU logo" class="footer-logo-circle-img" src="/assets/images/logo-no-bg.png">
                  </span>
        			  </a>
        			</nav>
            </div>
          	<div class="hidden-xs col-sm-6 col-md-2 col-lg-2">
        			<nav>
        			  <h6>PCU</h6>
        			  <ul class="list-unstyled">
                  
                    <li>
                        <a href="/overview">Overview</a>
                    </li>
                  
                    <li>
                        <a href="/use-cases">Use Cases</a>
                    </li>
                  
                    <li>
                        <a href="/resources">Resources</a>
                    </li>
                  
                    <li>
                        <a href="/news">News</a>
                    </li>
                  
                    <li>
                        <a href="/community">Community</a>
                    </li>
                  
        			  </ul>
        			</nav>
          	</div>
            <div class="hidden-xs col-sm-6 col-md-2 col-lg-2">
              <nav>
                <h6>Use Cases</h6>
                <ul class="list-unstyled">
                  
                  <li><a href="#">Enterprise Search</a></li>
                  
                  <li><a href="#">E-Commerce</a></li>
                  
                  <li><a href="#">Customer Insight</a></li>
                  
                </ul>
              </nav>
            </div>
            <div class="hidden-xs hidden-sm col-md-2 col-lg-2">
              <nav>
                <h6>About</h6>
                <ul class="list-unstyled">
                  
                    <li>
                        <a href="/brand-guideline">Brand Guideline</a>
                    </li>
                  
                    <li>
                        <a href="/terms-of-use">Terms of use</a>
                    </li>
                  
                </ul>
              </nav>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
      			  <nav id="socialNav">
      				<h6 class="title">Follow Us</h6>
      				<a alt="Github" href="https://github.com/pcu-consortium" target="_blank"><i class="fa fa-github fa-2x"></i></a>
      				<a alt="Twitter" href="https://twitter.com/PCUConsortium" target="_blank"><i class="fa fa-twitter fa-2x"></i>
              </a><a alt="Facebook" href="https://facebook.com/pcu-consortium" target="_blank"><i class="fa fa-facebook fa-2x"></i></a>
              <a alt="Linkedin" href="https://www.linkedin.com/company/pcu-consortium" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a>
              <a alt="Slideshare" href="https://www.slideshare.net/pcuconsortium" target="_blank"><i class="fa fa-slideshare fa-2x"></i></a>
              <p>© 2017 PCU Consortium</p>
              </nav>
      		  </div>
        </div>
    </div>
</footer>

    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/javascripts/jquery-3.2.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/javascripts/bootstrap.min.js"></script>
<script src="/assets/javascripts/pcu.js"></script>

<!-- twitter -->
<script>!function(d,s,id){
  var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';
  if(!d.getElementById(id)){js=d.createElement(s);js.id=id;
    js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}
  }(document, 'script', 'twitter-wjs');</script>

<!-- facebook -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v2.6";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- linkedin -->
<script defer src="//platform.linkedin.com/in.js" type="text/javascript"> lang: fr_FR</script>

<!-- Google -->
<script type="text/javascript">
  window.___gcfg = {lang: 'en'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98894093-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
